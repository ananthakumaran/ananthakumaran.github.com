---
layout: post
title: Personal Finance
---

This is a tutorial on how to manage personal finance using
[ledger](https://www.ledger-cli.org/). The reader is assumed to have a
good knowledge about how to use the command line. The basic idea is
that you write down all the transactions in a file named
`personal.ledger` and then use the command line program `ledger` to
generate various kinds of reports.


### Double-entry accounting

Ledger follows the double-entry accounting system. In simple terms, it is
a journal which tracks the movement of money from debit account to
credit account. Let's assume you are a salaried employee and make
100,000 INR every month. In ledger, a transaction is represented as

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #cb4b16;">2018/01/01</span><span style="color: #dc322f;"> Salary</span>
<span style="color: #2aa198;">    Income:Salary  </span><span style="color: #b58900;">                            -100,000 INR</span>
<span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                           100,000 INR</span>
</pre>

Here `Income:Salary` is the debit account and `Account:Savings` is the
credit account. The date at which the transaction took place and a
description of the transaction is written in the first line followed
by the list of credit or debit entry. Account name could be
anything. The `:` in the account name represents hierarchy. Its use
will become more clear when we look at the reports generated by
ledger. The sum of the balance of all the accounts must be zero.

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #b58900; font-weight: bold;">~/finance $ </span>ledger -f personal.ledger balance
         100,000 INR  <span style="color: #268bd2;">Account:Savings</span>
        <span style="color: #dc322f;">-100,000 INR</span>  <span style="color: #268bd2;">Income:Salary</span>
--------------------
                   0
</pre>

We now know enough basics to get started. For simplicity, I am going to
just show entries for 3 months.

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #cb4b16;">2018/01/01</span><span style="color: #dc322f;"> Salary</span>
<span style="color: #2aa198;">    Income:Salary  </span><span style="color: #b58900;">                            -100,000 INR</span>
<span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                           100,000 INR</span>

<span style="color: #cb4b16;">2018/02/01</span><span style="color: #dc322f;"> Salary</span>
<span style="color: #2aa198;">    Income:Salary  </span><span style="color: #b58900;">                            -100,000 INR</span>
<span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                           100,000 INR</span>

<span style="color: #cb4b16;">2018/03/01</span><span style="color: #dc322f;"> Salary</span>
<span style="color: #2aa198;">    Income:Salary  </span><span style="color: #b58900;">                            -100,000 INR</span>
<span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                           100,000 INR</span>
</pre>

The total balance in the savings account can be reported by

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #b58900; font-weight: bold;">~/finance $ </span>ledger -f personal.ledger balance Account:Savings
         300,000 INR  <span style="color: #268bd2;">Account:Savings</span>
</pre>

### Asset

A person's net worth is calculated by the formula

> Net worth = Assets - Liablities

In a ledger file, each of these assets should be represented by a
separate account. Let say 12,000 INR of your salary goes to EPF, we could
represent it as follows.

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #cb4b16;">2018/01/01</span><span style="color: #dc322f;"> Salary</span>
<span style="color: #2aa198;">    Income:Salary  </span><span style="color: #b58900;">                            -100,000 INR</span>
<span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            88,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:EPF  </span><span style="color: #b58900;">                             12,000 INR</span><span style="color: #657b83; background-color: #fdf6e3;">
</span>
<span style="color: #cb4b16;">2018/02/01</span><span style="color: #dc322f;"> Salary</span>
<span style="color: #2aa198;">    Income:Salary  </span><span style="color: #b58900;">                            -100,000 INR</span>
<span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            88,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:EPF  </span><span style="color: #b58900;">                             12,000 INR</span><span style="color: #657b83; background-color: #fdf6e3;">
</span>
<span style="color: #cb4b16;">2018/03/01</span><span style="color: #dc322f;"> Salary</span>
<span style="color: #2aa198;">    Income:Salary  </span><span style="color: #b58900;">                            -100,000 INR</span>
<span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            88,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:EPF  </span><span style="color: #b58900;">                             12,000 INR</span><span style="color: #657b83; background-color: #fdf6e3;">
</span></pre>

There can be multiple debit entries in a transaction as long as the
credit and debit sum up to zero. Let's say you invest 5,000 INR every
month in the PPF account, it could be represented as follows.

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #cb4b16;">2018/01/01</span><span style="color: #dc322f;"> Salary</span>
<span style="color: #2aa198;">    Income:Salary  </span><span style="color: #b58900;">                            -100,000 INR</span>
<span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            88,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:EPF  </span><span style="color: #b58900;">                             12,000 INR

</span><span style="color: #cb4b16;">2018/01/01</span><span style="color: #dc322f;"> Investment
</span><span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            -5,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:PPF  </span><span style="color: #b58900;">                              5,000 INR
</span>
<span style="color: #cb4b16;">2018/02/01</span><span style="color: #dc322f;"> Salary</span>
<span style="color: #2aa198;">    Income:Salary  </span><span style="color: #b58900;">                            -100,000 INR</span>
<span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            88,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:EPF  </span><span style="color: #b58900;">                             12,000 INR

</span><span style="color: #cb4b16;">2018/02/01</span><span style="color: #dc322f;"> Investment
</span><span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            -5,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:PPF  </span><span style="color: #b58900;">                              5,000 INR
</span>
<span style="color: #cb4b16;">2018/03/01</span><span style="color: #dc322f;"> Salary</span>
<span style="color: #2aa198;">    Income:Salary  </span><span style="color: #b58900;">                            -100,000 INR</span>
<span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            88,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:EPF  </span><span style="color: #b58900;">                             12,000 INR

</span><span style="color: #cb4b16;">2018/03/01</span><span style="color: #dc322f;"> Investment
</span><span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            -5,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:PPF  </span><span style="color: #b58900;">                              5,000 INR
</span></pre>

The money moves from your savings account to ppf account. Your current
net worth could be reported by

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #b58900; font-weight: bold;">~/finance $ </span>ledger -f personal.ledger balance Asset
          51,000 INR  <span style="color: #268bd2;">Asset:Debt</span>
          36,000 INR    <span style="color: #268bd2;">EPF</span>
          15,000 INR    <span style="color: #268bd2;">PPF</span>
--------------------
          51,000 INR
</pre>

### Interest

The interest credited by the bank could be represented as another
transaction. If the bank credits the interest at the end of the
financial year, it could be represented as

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #cb4b16;">2018/03/31</span><span style="color: #dc322f;"> Interest</span>
<span style="color: #2aa198;">    Income:Interest  </span><span style="color: #b58900;">                            -15,000 INR</span>
<span style="color: #2aa198;">    Asset:Debt:PPF  </span><span
style="color: #b58900;">                               5,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:EPF  </span><span style="color: #b58900;">                              10,000 INR</span>
</pre>

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #b58900; font-weight: bold;">~/finance $ </span>ledger -f personal.ledger balance Asset
          66,000 INR  <span style="color: #268bd2;">Asset:Debt</span>
          46,000 INR    <span style="color: #268bd2;">EPF</span>
          20,000 INR    <span style="color: #268bd2;">PPF</span>
--------------------
          66,000 INR
</pre>

### Commodity

Let's say you are also investing 10,000 INR on UTI Nifty Index Fund
and 10,000 INR on ICICI Nifty Next 50 Index Fund every month. Mutual
Fund can be considered as a commodity which could be converted to
currency.

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #cb4b16;">2018/01/01</span><span style="color: #dc322f;"> Investment
</span><span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            -25,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:PPF  </span><span style="color: #b58900;">                               5,000 INR
</span><span style="color: #2aa198;">    Asset:Equity:NIFTY  </span><span style="color: #b58900;">        148.0865 NIFTY @ 67.5281 INR
</span><span style="color: #2aa198;">    Asset:Equity:NIFTY_JR  </span><span style="color: #b58900;">  358.6659 NIFTY_JR @ 27.8811 INR
</span>
<span style="color: #cb4b16;">2018/02/01</span><span style="color: #dc322f;"> Investment
</span><span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            -25,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:PPF  </span><span style="color: #b58900;">                               5,000 INR
</span><span style="color: #2aa198;">    Asset:Equity:NIFTY  </span><span style="color: #b58900;">        140.2870 NIFTY @ 71.2824 INR</span>
<span style="color: #2aa198;">    Asset:Equity:NIFTY_JR  </span><span style="color: #b58900;">  363.2242 NIFTY_JR @ 27.5312 INR
</span>
<span style="color: #cb4b16;">2018/03/01</span><span style="color: #dc322f;"> Investment
</span><span style="color: #2aa198;">    Account:Savings  </span><span style="color: #b58900;">                            -25,000 INR
</span><span style="color: #2aa198;">    Asset:Debt:PPF  </span><span style="color: #b58900;">                               5,000 INR
</span><span style="color: #2aa198;">    Asset:Equity:NIFTY  </span><span style="color: #b58900;">        147.5908 NIFTY @ 67.7549 INR</span>
<span style="color: #2aa198;">    Asset:Equity:NIFTY_JR  </span><span style="color: #b58900;">  378.4323 NIFTY_JR @ 26.4248 INR</span>
</pre>

Let's consider `148.0865 NIFTY @ 67.5281 INR`. Here `NIFTY` is the
name of the commodity and we have bought 148.0865 units at 67.5281 INR
per unit. 

ledger by default reports the commodity without conversion.

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #b58900; font-weight: bold;">~/finance $ </span>ledger -f personal.ledger balance Asset
          66,000 INR
      435.9643 NIFTY
  1100.3224 NIFTY_JR  <span style="color: #268bd2;">Asset</span>
          66,000 INR    <span style="color: #268bd2;">Debt</span>
          46,000 INR      <span style="color: #268bd2;">EPF</span>
          20,000 INR      <span style="color: #268bd2;">PPF</span>
      435.9643 NIFTY
  1100.3224 NIFTY_JR    <span style="color: #268bd2;">Equity</span>
      435.9643 NIFTY      <span style="color: #268bd2;">NIFTY</span>
  1100.3224 NIFTY_JR      <span style="color: #268bd2;">NIFTY_JR</span>
--------------------
          66,000 INR
      435.9643 NIFTY
  1100.3224 NIFTY_JR
</pre>

To convert the commodity to current market value, we have to supply
the current price of the commodity. AMFI publishes the latest [NAV
values](https://www.amfiindia.com/spages/NAVOpen.txt). Save the
following text in a file named `price.db`

<pre style="color: #657b83; background-color: #fdf6e3;">
P 2018/10/26 00:00:00 NIFTY 65.6193 INR
P 2018/10/26 00:00:00 NIFTY_JR 23.0733 INR
</pre>

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #b58900; font-weight: bold;">~/finance $ </span>ledger -f personal.ledger --price-db price.db balance --market Asset
         119,996 INR  <span style="color: #268bd2;">Asset</span>
          66,000 INR    <span style="color: #268bd2;">Debt</span>
          46,000 INR      <span style="color: #268bd2;">EPF</span>
          20,000 INR      <span style="color: #268bd2;">PPF</span>
          53,996 INR    <span style="color: #268bd2;">Equity</span>
          28,608 INR      <span style="color: #268bd2;">NIFTY</span>
          25,388 INR      <span style="color: #268bd2;">NIFTY_JR</span>
--------------------
         119,996 INR
</pre>

The same approach could be used for other commodities like gold, stocks etc.

### Gain

Gain or loss based on the commodity value in the price.db can be
calculated as follows.

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #b58900; font-weight: bold;">~/finance $ </span>ledger -f personal.ledger --price-db price.db balance --gain Asset
          <span style="color: #dc322f;">-6,004 INR</span>  <span style="color: #268bd2;">Asset:Equity</span>
          <span style="color: #dc322f;">-1,392 INR</span>    <span style="color: #268bd2;">NIFTY</span>
          <span style="color: #dc322f;">-4,612 INR</span>    <span style="color: #268bd2;">NIFTY_JR</span>
--------------------
          <span style="color: #dc322f;">-6,004 INR</span>
</pre>


### Register

The list of all the transactions related to a account and it's running
total could be reported by the register command.

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #b58900; font-weight: bold;">~/finance $ </span>ledger -f personal.ledger --price-db price.db register --market Asset:Equity
18-Jan-01 <span style="font-weight: bold;">Investment  </span> <span style="color: #268bd2;">Asset:Equity:NIFTY      </span> 10,000 INR  10,000 INR
                       <span style="color: #268bd2;">Asset:Equity:NIFTY_JR   </span> 10,000 INR  20,000 INR
18-Feb-01              <span style="color: #268bd2;">&lt;Revalued&gt;              </span>    430 INR  20,430 INR
18-Feb-01 <span style="font-weight: bold;">Investment  </span> <span style="color: #268bd2;">Asset:Equity:NIFTY      </span> 10,000 INR  30,430 INR
                       <span style="color: #268bd2;">Asset:Equity:NIFTY_JR   </span> 10,000 INR  40,430 INR
18-Mar-01              <span style="color: #268bd2;">&lt;Revalued&gt;              </span> <span style="color: #dc322f;">-1,816 INR</span>  38,615 INR
18-Mar-01 <span style="font-weight: bold;">Investment  </span> <span style="color: #268bd2;">Asset:Equity:NIFTY      </span> 10,000 INR  48,615 INR
                       <span style="color: #268bd2;">Asset:Equity:NIFTY_JR   </span> 10,000 INR  58,615 INR
18-Oct-26              <span style="color: #268bd2;">&lt;Revalued&gt;              </span> <span style="color: #dc322f;">-4,619 INR</span>  53,996 INR
</pre>


### Allocation

The allocation of money across different assets could be reported as
follows.

<pre style="color: #657b83; background-color: #fdf6e3;">
<span style="color: #b58900; font-weight: bold;">~/finance $ </span>ledger -f personal.ledger --price-db price.db balance --market --percent Asset
             100.00%  <span style="color: #268bd2;">Asset</span>
              55.00%    <span style="color: #268bd2;">Debt</span>
              69.70%      <span style="color: #268bd2;">EPF</span>
              30.30%      <span style="color: #268bd2;">PPF</span>
              45.00%    <span style="color: #268bd2;">Equity</span>
              52.98%      <span style="color: #268bd2;">NIFTY</span>
              47.02%      <span style="color: #268bd2;">NIFTY_JR</span>
</pre>

This is just the tip of the iceberg. Checkout out the ledger
[manual](https://www.ledger-cli.org/3.0/doc/ledger3.html) for further
details.
