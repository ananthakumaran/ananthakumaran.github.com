---
layout: post
title: Github Mavenized
header: Github Mavenized
meta_keywords: maven repo in github , mave site in github , maven github , github mavenized , maven project in github
meta_descripton: maven project in github - maven site in github - maven repo in github
---

Maven projects can use the [github pages](http://pages.github.com/) feature
to publish the project site and setup a repository in Github. There is a nice
[post](http://www.sonatype.com/people/2009/09/maven-tips-and-tricks-using-github/)
which describes how to create a new maven project in github. I am not going to repeat that.



After setting up your project, create  [gh-pages](http://pages.github.com/) branch for your project.

Drop the following element in the pom.xml file
This will instruct maven to deploy the site and the artifacts in the temp folder outside the root folder.
{% highlight xml %}
  <distributionManagement>
    <site>
      <id>maven-demo</id>
      <url>file:///${basedir}/../../../temp</url>
    </site>
    <repository>
      <id>maven-demo</id>
      <url>file:///${basedir}/../../../temp/maven2</url>
    </repository>
  </distributionManagement>	
{% endhighlight %}

I am using a rake task to automate the release. Create a file 
named rakefile.rb in the project root folder and drop the following snippet in it.
To run this you need the [git 1.7](http://git-scm.com/).
{% highlight ruby %}
task :release do
  temp = "../temp"
  puts `git clone -l -s -b gh-pages . #{temp}`
  if system("mvn release:perform")
      puts `cd #{temp} && git add -A && git commit -m "releasing artifacts" && git push origin gh-pages`
      puts `git push origin gh-pages`
      puts " artifact released successfully "
  else
    puts " could not release artifact "
  end
  puts `rm -r #{temp}`
end
{% endhighlight %}

Now you are ready to release the project in Github. The only thing
you have to do is instead of calling `mvn release:perform` run the `release`
task. To perform a release run the following commands.

{% highlight ruby %}
mvn release:prepare
rake release
{% endhighlight %}

I have created a [demo project](http://github.com/ananthakumaran/maven-demo) in Github. You can see
the project site generated by maven [here](http://ananthakumaran.github.com/maven-demo). The repository can be accessed
at the following url http://ananthakumaran.github.com/maven-demo/maven2. Although
maven provides lot of features, it sucks when we try to write a custom tasks. It is very easy
to convert the above rake task to shell script. I hope this will help someone.
